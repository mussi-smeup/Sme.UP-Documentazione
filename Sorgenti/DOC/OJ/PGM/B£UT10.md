AZIONI SU SORGENTI
AZIONI SU SORGENTI
# B£UT10 - AZIONI SU SORGENTI
# Salvataggio su
Questa azione consente di effetturare il salvataggio dei sorgenti presenti nella libreria/file indicati. E' possibile indicare un intervallo di date che limita il salvataggio ai soli sorgenti modificati/creati all'interno
dell'intervallo specificato. Il risultato dell'operazione di salvataggio è un savf. Il savf viene memorizzato nella libreria e nel savf di destinazione se il campo
"Salvataggio su" viene lasciato \*blanks, altrimenti viene eseguito un trasferimento via ftp all'indirizzo e percorso specificati, usando utente e password di collegamento forniti. Se il savf non esiste viene creato nella libreria di destinazione. Il percorso è facoltativo :  nel caso in cui non viene specificato un percorso l'ftp avviene nella directory predefinita per l'ftp sulla macchina di destinazione. Il percorso deve essere ammesso nell'ambito della gestione del servizio FTP sulla macchina oggetto dell'ftp stessa.
Il percorso può essere usato anche per indicare una cartella dell'IFS (es. /Smeup/temp/). Per la convenzione circa il  nome del savf di salvataggio si rimanda al codice RPG del programma. Si ricorda infine che per eseguire un ftp anonimo è necessario utilizzare l'utente "anonymous" con password uguale ad un qualunque indirizzo mail (es. a@a.it).
Impostando il flag 'Nome da percorso' l'ftp viene eseguito utilizzando il percorso :  in questo modo è possibile
eseguire ftp direttamente su un altro AS400 indicando come percorso il nome della libreria e del savf di destinazione :  libreria e savf devono esistere sul sistema di destinazione.
# Ripristino da
Questa azione alternativa al "Salvataggio su" viene eseguita con l'opzione R sul campo di scelta dell'azione "Salvataggio su".
Consente di ripristinare in una libreria di destinazione un savf creato con l'opzione "Salvataggio su". Il savf viene ripristinato con il nome del file importato oppure con il nome a piacere indicato nel campo "Savf. destin.". La descrizione del savf in ogni caso indica a quale ptf corrisponde. Il savf viene recuperato dal percorso indicato (che  è obbligatorio) e deve essere accessibile dall'AS400. E' obbligatorio indicare la macchina sulla quale viene eseguito il ripristino (quindi l'indirizzo dell'AS400 deve essere codificato in tabella B§H. Utente e password sono obbligatori per eseguire la get dell'ftp sull'AS400 (pertanto sono un nome utente e password validi su AS400). Durante il ripristino vengono creati,se non esistono, nella libreria di destinazione tutti i pf-src precedentemente salvati.
Vengono quindi copiati tutti i sorgenti dopo aver eventualmente creato una copia di backup di sorgenti già presenti
nel file di destinazione. Le copie di backup sono costruite per rename del sorgente concatenando al nome orginale un suffisso costituito da un underscore "_" e un progressivo che parte da 1 fino a 0 e poi utilizza le lettere
dell'alfabeto. Se la lunghezza del nome originario supera gli 8 caratteri l'underscore viene omesso. La versione più recente del backup di un sorgente è quindi quella con il suffisso più "elevato". Viene infine cambiato il tipo del sorgente concatenandovi il suffisso _O (es. RPG_O, DSPF_O).
Oss. In fase di ripristino non sono utilizzate le parzializzazioni definite nei campi "Limiti" né ha significato quanto indicato nei campi "File"/"Libreria".
# Gestione PTF
Il programma di gestione PTF analizza una libreria verificando se i sorgenti (intendo con ciò i membri di ogni PF-SRC presente nella libreria in esame) in essa contenuti appartengono a una PTF. Viene quindi proposto a video l'elenco delle PTF ed i relativi PF-SRC che ne contengono i sorgenti; dall'elenco è possibile visualizzare i sorgenti (opzione 5 del SEU) o chiamare l'utility di compilazione di massa (B£UT11). Si osservi che la compilazione riguarda solo i sorgenti dell'ultima PTF installata in quanto per gli SRC precedenti viene modificato il tipo del file (es. RPG --> RPG_O).
Devono ancora essere implementate le funzioni di controllo coerenza oggetti in linea e ultima PTF installata e l'eventuale ripristino di versioni precedenti. Tutte le problematiche connesse al controllo di programmi personalizzati e alla compilazione di PF-DTA al momento rimangono aperte.
